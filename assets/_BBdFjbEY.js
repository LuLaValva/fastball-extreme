import{r as l,n as D,a as p,c as y,t as w,p as B,v as i,q as A,o as T,d as r,i as v,u as _,w as c,b as Vt,g as e,x as j,s as V,e as Gt,y as Ot}from"./_BfOpEZYQ.js";import{a as G,_ as O,b as F,c as J}from"./_B5lPRM8E.js";const so=`${G}${G}<div class=game><div class=view><div></div><!></div></div>`,no=`/${O}&/${O}& D D b%m`;let a=function(t){return t[t.Empty=0]="Empty",t[t.Tile=1]="Tile",t[t.Spikes=2]="Spikes",t[t.Start=3]="Start",t[t.Goal=4]="Goal",t[t.DirectLeft=5]="DirectLeft",t[t.DirectRight=6]="DirectRight",t[t.Spring=7]="Spring",t[t.SpeedRight=8]="SpeedRight",t[t.SpeedLeft=9]="SpeedLeft",t}({});const tt=Pt,b=.015,g=.1,Y=1e3/60,ot=_(2,t=>{const{_:{3:o,4:s}}=t;c(t[0],{"--x":o,"--y":s})}),st=r(4,0,void 0,()=>ot),nt=r(3,0,void 0,()=>ot),Ft=l("f5",y("<div class=speed-right></div>"," ",void 0,()=>[st,nt])),at=_(2,t=>{const{_:{3:o,4:s}}=t;c(t[0],{"--x":o,"--y":s})}),et=r(4,0,void 0,()=>at),it=r(3,0,void 0,()=>at),Jt=l("f6",y("<div class=speed-left></div>"," ",void 0,()=>[et,it])),rt=_(2,t=>{const{_:{3:o,4:s}}=t;c(t[0],{"--x":o,"--y":s})}),lt=r(4,0,void 0,()=>rt),dt=r(3,0,void 0,()=>rt),Yt=l("f7",y("<div class=spring></div>"," ",void 0,()=>[lt,dt])),_t=_(2,t=>{const{_:{3:o,4:s}}=t;c(t[0],{"--x":o,"--y":s})}),ft=r(4,0,void 0,()=>_t),ct=r(3,0,void 0,()=>_t),Ct=l("f8",y("<div class=right-sign></div>"," ",void 0,()=>[ft,ct])),yt=_(2,t=>{const{_:{3:o,4:s}}=t;c(t[0],{"--x":o,"--y":s})}),vt=r(4,0,void 0,()=>yt),ut=r(3,0,void 0,()=>yt),qt=l("f9",y("<div class=left-sign></div>"," ",void 0,()=>[vt,ut])),xt=_(2,t=>{const{_:{3:o,4:s}}=t;c(t[0],{"--x":o,"--y":s})}),ht=r(4,0,void 0,()=>xt),gt=r(3,0,void 0,()=>xt),It=l("f10",y("<div class=goal></div>"," ",void 0,()=>[ht,gt])),mt=_(2,t=>{const{_:{3:o,4:s}}=t;c(t[0],{"--x":o,"--y":s})}),Bt=r(4,0,void 0,()=>mt),$t=r(3,0,void 0,()=>mt),zt=l("f11",y("<div class=spikes></div>"," ",void 0,()=>[Bt,$t])),Mt=_(2,t=>{const{_:{3:o,4:s}}=t;c(t[0],{"--x":o,"--y":s})}),St=r(4,0,void 0,()=>Mt),bt=r(3,0,void 0,()=>Mt),Ht=l("f12",y("<div class=tile></div>"," ",void 0,()=>[St,bt])),C=Gt(0,0),q=i(5,(t,o)=>C(t,o===a.Tile?Ht:o===a.Spikes?zt:o===a.Goal?It:o===a.DirectLeft?qt:o===a.DirectRight?Ct:o===a.Spring?Yt:o===a.SpeedLeft?Jt:o===a.SpeedRight?Ft:null),()=>C),I=i(4,0,()=>v([e(St,0),e(Bt,0),e(ht,0),e(vt,0),e(ft,0),e(lt,0),e(et,0),e(st,0)])),z=i(3,0,()=>v([e(bt,0),e($t,0),e(gt,0),e(ut,0),e(ct,0),e(dt,0),e(it,0),e(nt,0)])),H=i(2,(t,o)=>{z(t,o.x),I(t,o.y),q(t,o.type)},()=>v([z,I,q])),Kt=i(1,(t,o)=>H(t,o?.[0]),()=>H),Nt=l("f16",y("<!><!><!---->","D%",void 0,void 0,()=>Kt)),Qt=D("f14",(t,{8:o,13:s,14:u,16:d,17:$,18:E,19:Lt,21:wt,22:x,23:L,24:At})=>{if(E!==null){Dt(t,!At);const jt=tt();let h=E;if(h&&jt-h>Y){h+=Y;let n=[d+x,$+L];switch(o[Math.floor(n[1]+1)]?.[Math.floor(n[0]+.5)]===a.Tile?(M(t,Lt?b*-16:0),n[1]=Math.floor(n[1])):M(t,L+b),(n[1]>o.length+10||o[Math.floor(n[1]+.5)]?.[Math.floor(n[0]+1)]===a.Tile||o[Math.floor(n[1]+.8)]?.[Math.floor(n[0]+.8)]===a.Tile||o[Math.floor(n[1])]?.[Math.floor(n[0]+.5)]===a.Tile||o[Math.floor(n[1]+.2)]?.[Math.floor(n[0]+.8)]===a.Tile||o[Math.floor(n[1]+.5)]?.[Math.floor(n[0]+.5)]===a.Spikes)&&(n=[...u],h=null,m(t,g),M(t,0),w(t[0],wt+1)),o[Math.floor(n[1]+.5)]?.[Math.floor(n[0]+.5)]){case a.Goal:h=null,w(t[1],!0),s();break;case a.DirectLeft:m(t,-Math.abs(x));break;case a.DirectRight:m(t,Math.abs(x));break;case a.Spring:M(t,b*-26);break;case a.SpeedLeft:(Math.floor($+.5)!==Math.floor(n[1]+.5)||Math.floor(d+.5)!==Math.floor(n[0]+.5))&&x!==g&&m(t,x-g/2);break;case a.SpeedRight:(Math.floor($+.5)!==Math.floor(n[1]+.5)||Math.floor(d+.5)!==Math.floor(n[0]+.5))&&x!==-g&&m(t,x+g/2);break}k(t,n)}R(t,h)}}),f=_(11,t=>{Qt(t)}),P=_(3,t=>{Q(t,Rt(t)())},()=>Q),kt=_(2,t=>{const{16:o,17:s}=t;c(t[3],{"--x":o,"--y":s})}),Ut=Ot(5,Nt),Dt=B(24,0,()=>f),M=B(23,0,()=>f),m=B(22,(t,o)=>c(t[4],{"animation-duration":.15/Math.abs(o)+"s","animation-direction":o<0?"reverse":void 0}),()=>f),Wt=p("f3",i(21,0,()=>f)),Zt=D("f15",(t,{20:o})=>{document.addEventListener("keydown",s=>{s.target instanceof Element&&s.target.matches("button, [role='button'], input, select, textarea")||s.key===" "&&o()},{signal:A(t,0)}),document.addEventListener("keyup",s=>{s.key===" "&&S(t,!1)},{signal:A(t,1)}),T(t[2],"pointerdown",o)}),Xt=i(20,(t,o)=>{j(t,0),j(t,1),Zt(t)}),S=B(19,0,()=>f),R=B(18,(t,o)=>{Vt(t[4],{ball:!0,moving:o!==null}),Xt(t,Et(t))},()=>f),K=i(17,0,()=>v([f,kt])),pt=p("f4",(t,o)=>{}),N=i(16,0,()=>v([f,kt])),k=B(15,(t,o)=>{N(t,o?.[0]),K(t,o?.[1])},()=>v([N,K])),Q=i(14,(t,o)=>k(t,[...o]),()=>v([f,k])),ao=i(13,0,()=>f),U=i(12,0,()=>P),W=i(11,0,()=>P),Z=i(10,(t,o)=>{W(t,o?.length),U(t,o?.j)},()=>v([W,U])),X=i(9,0,()=>P),eo=i(8,(t,o)=>{X(t,o?.length),Z(t,o?.i),Ut(t,[o.flatMap((s,u)=>s.flatMap((d,$)=>d===a.Empty||d===a.Start?[]:[{x:$,y:u,type:d}]))])},()=>v([f,X,Z])),Tt=D("f13",t=>T(t[2],"pointerup",function(){S(t,!1)}));function io(t){V(t,0,Wt),F(t[0]),V(t,1,pt),F(t[1]),Tt(t),R(t,null),S(t,!1),J(t[0],{value:0,key:`level-${t.$global.params.id}-deaths`}),J(t[1],{value:!1,key:`level-${t.$global.params.id}-victory`}),m(t,g),M(t,0),Dt(t,!0)}function Pt(){return+document.timeline.currentTime}function Rt({9:t,11:o,12:s}){return()=>{for(let u=0;u<t;u++)for(let d=0;d<o;d++)if(s===a.Start)return[d,u];return[0,0]}}function Et(t,{18:o}=t){return function(){o===null?R(t,tt()):S(t,!0)}}l("f1",Pt);l("f0",Rt);l("f2",Et);export{so as _,no as a,io as b,eo as c,ao as d};
//# sourceMappingURL=_BBdFjbEY.js.map
