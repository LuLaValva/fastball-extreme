import{r as M,n as $,a as X,b as p,t as R,p as g,v as r,q as E,o as T,e as x,d as tt,g as f,u as y,j as B,w as L,s as w,x as ot,y as mt,f as Mt}from"./_BEeG5Lpj.js";import{a as j,_ as A,b as F,c as V}from"./_DSgdA-9l.js";const Et=`${j}${j}<div class=game><div class=view><div></div><!></div></div>`,Lt=`/${A}&/${A}& D D b%m`;let n=function(t){return t[t.Empty=0]="Empty",t[t.Ground=1]="Ground",t[t.Fire=2]="Fire",t[t.Start=3]="Start",t[t.Goal=4]="Goal",t[t.DirectLeft=5]="DirectLeft",t[t.DirectRight=6]="DirectRight",t[t.Spring=7]="Spring",t[t.SpeedRight=8]="SpeedRight",t[t.SpeedLeft=9]="SpeedLeft",t}({});n.Ground+"",n.Fire+"",n.Goal+"",n.DirectLeft+"",n.DirectRight+"",n.Spring+"",n.SpeedLeft+"",n.SpeedRight+"";const at=lt,v=.015,u=.1,O=1e3/60,nt=y(2,t=>{const{_:{3:o,4:s}}=t;ot(t[0],{"--x":o,"--y":s})}),rt=x(6,(t,o)=>tt(t[0],o)),st=x(4,0,void 0,()=>nt),it=x(3,0,void 0,()=>nt),yt=M("f5",p("<div></div>"," ",void 0,()=>[rt,st,it])),J=Mt(0,0),Y=r(6,(t,o)=>J(t,o?yt:null),()=>f([J,B(rt,0)])),C=r(5,(t,o)=>Y(t,o?.type),()=>Y),q=r(4,0,()=>B(st,0)),I=r(3,0,()=>B(it,0)),z=r(2,(t,o)=>{I(t,o.x),q(t,o.y),C(t,o.type)},()=>f([I,q,C])),bt=r(1,(t,o)=>z(t,o?.[0]),()=>z),vt=M("f9",p("<!><!><!---->","D%",void 0,void 0,()=>bt)),St=$("f7",(t,{8:o,13:s,14:l,16:i,17:h,18:D,19:ut,21:ct,22:_,23:P,24:gt})=>{if(D!==null){ft(t,!gt);const ht=at();let d=D;if(d&&ht-d>O){d+=O;let a=[i+_,h+P];switch(o[Math.floor(a[1]+1)]?.[Math.floor(a[0]+.5)]===n.Ground?(m(t,ut?v*-16:0),a[1]=Math.floor(a[1])):m(t,P+v),(a[1]>o.length+10||o[Math.floor(a[1]+.5)]?.[Math.floor(a[0]+1)]===n.Ground||o[Math.floor(a[1]+.8)]?.[Math.floor(a[0]+.8)]===n.Ground||o[Math.floor(a[1])]?.[Math.floor(a[0]+.5)]===n.Ground||o[Math.floor(a[1]+.2)]?.[Math.floor(a[0]+.8)]===n.Ground||o[Math.floor(a[1]+.5)]?.[Math.floor(a[0]+.5)]===n.Fire)&&(a=[...l],d=null,c(t,u),m(t,0),R(t[0],ct+1)),o[Math.floor(a[1]+.5)]?.[Math.floor(a[0]+.5)]){case n.Goal:d=null,R(t[1],!0),s();break;case n.DirectLeft:c(t,-Math.abs(_));break;case n.DirectRight:c(t,Math.abs(_));break;case n.Spring:m(t,v*-26);break;case n.SpeedLeft:(Math.floor(h+.5)!==Math.floor(a[1]+.5)||Math.floor(i+.5)!==Math.floor(a[0]+.5))&&_!==u&&c(t,_-u/2);break;case n.SpeedRight:(Math.floor(h+.5)!==Math.floor(a[1]+.5)||Math.floor(i+.5)!==Math.floor(a[0]+.5))&&_!==-u&&c(t,_+u/2);break}S(t,a)}G(t,d)}}),e=y(11,t=>{St(t)}),k=y(3,t=>{N(t,_t(t)())},()=>N),et=y(2,t=>{const{16:o,17:s}=t;ot(t[3],{"--x":o,"--y":s})}),$t=mt(5,vt),ft=g(24,0,()=>e),m=g(23,0,()=>e),c=g(22,0,()=>e),xt=X("f3",r(21,0,()=>e)),Bt=$("f8",(t,{20:o})=>{document.addEventListener("keydown",s=>{s.target instanceof Element&&s.target.matches("button, [role='button'], input, select, textarea")||s.key===" "&&o()},{signal:E(t,0)}),document.addEventListener("keyup",s=>{s.key===" "&&b(t,!1)},{signal:E(t,1)}),T(t[2],"pointerdown",o)}),kt=r(20,(t,o)=>{L(t,0),L(t,1),Bt(t)}),b=g(19,0,()=>e),G=g(18,(t,o)=>{tt(t[4],{ball:!0,moving:o!==null}),kt(t,dt(t))},()=>e),H=r(17,0,()=>f([e,et])),Gt=X("f4",(t,o)=>{}),K=r(16,0,()=>f([e,et])),S=g(15,(t,o)=>{K(t,o?.[0]),H(t,o?.[1])},()=>f([K,H])),N=r(14,(t,o)=>S(t,[...o]),()=>f([e,S])),wt=r(13,0,()=>e),Q=r(12,0,()=>k),U=r(11,0,()=>k),W=r(10,(t,o)=>{U(t,o?.length),Q(t,o?.j)},()=>f([U,Q])),Z=r(9,0,()=>k),jt=r(8,(t,o)=>{Z(t,o?.length),W(t,o?.i),$t(t,[o.flatMap((s,l)=>s.flatMap((i,h)=>i===n.Empty||i===n.Start?[]:[{x:h,y:l,type:i}]))])},()=>f([e,Z,W])),Dt=$("f6",t=>T(t[2],"pointerup",function(){b(t,!1)}));function At(t){w(t,0,xt),F(t[0]),w(t,1,Gt),F(t[1]),Dt(t),G(t,null),b(t,!1),V(t[0],{value:0,key:`level-${t.$global.params.id}-deaths`}),V(t[1],{value:!1,key:`level-${t.$global.params.id}-victory`}),c(t,u),m(t,0),ft(t,!0)}function lt(){return+document.timeline.currentTime}function _t({9:t,11:o,12:s}){return()=>{for(let l=0;l<t;l++)for(let i=0;i<o;i++)if(s===n.Start)return[i,l];return[0,0]}}function dt(t,{18:o}=t){return function(){o===null?G(t,at()):b(t,!0)}}M("f1",lt);M("f0",_t);M("f2",dt);export{Et as _,Lt as a,At as b,jt as c,wt as d};
//# sourceMappingURL=_DhTWkGML.js.map
