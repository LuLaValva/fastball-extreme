import{p as $t,r as M,e as G,b as ot,q as vt,g as rt,t as w,u as _,v as n,w as A,o as at,j as D,l as i,x as b,y as St,h as nt,m as R,z as j,s as F,A as lt,B as xt,k as Bt}from"./_BUhgkSPo.js";import{_ as V,a as O,b as J,c as Y}from"./_CtLhihgC.js";const Ot=`${V}${V}<div class=game><div class=view><div></div><!></div></div>`,Jt=`/${O}&/${O}& D D b%m`;let a=function(t){return t[t.Empty=0]="Empty",t[t.Ground=1]="Ground",t[t.Fire=2]="Fire",t[t.Start=3]="Start",t[t.Goal=4]="Goal",t[t.DirectLeft=5]="DirectLeft",t[t.DirectRight=6]="DirectRight",t[t.Spring=7]="Spring",t[t.SpeedRight=8]="SpeedRight",t[t.SpeedLeft=9]="SpeedLeft",t[t.Collectible=10]="Collectible",t}({});a.Ground+"",a.Fire+"",a.Goal+"",a.DirectLeft+"",a.DirectRight+"",a.Spring+"",a.SpeedLeft+"",a.SpeedRight+"",a.Collectible+"";const et=ut,S=.015,h=2,x=1e3/60,y=b(4,t=>{const{_:{_:{24:o},3:l,4:f,7:e}}=t;nt(t[0],[e,o[`${l},${f}`]&&" collected"])}),st=b(2,t=>{const{_:{3:o,4:l}}=t;lt(t[0],{"--x":o,"--y":l})}),kt=$t("f5",vt(24,0,t=>t._._,()=>y)),it=D(7,0,void 0,()=>y),ft=D(4,0,void 0,()=>i([y,st])),dt=D(3,0,void 0,()=>i([y,st])),Gt=M("f6",rt("<div></div>"," ",void 0,()=>[it,ft,dt,kt])),q=Bt(0,0),z=n(7,(t,o)=>q(t,o?Gt:null),()=>i([q,R(it,0)])),I=n(6,(t,o)=>z(t,o),()=>z),H=n(5,(t,o)=>I(t,o?.type),()=>I),K=n(4,0,()=>R(ft,0)),N=n(3,0,()=>R(dt,0)),Q=n(2,(t,o)=>{N(t,o.x),K(t,o.y),H(t,o.type)},()=>i([N,K,H])),Dt=n(1,(t,o)=>Q(t,o?.[0]),()=>Q),Rt=M("f10",rt("<!><!><!---->","D%",void 0,void 0,()=>Dt)),Ct=G("f8",(t,{8:o,13:l,14:f,16:e,17:u,18:L,19:mt,21:Mt,22:c,23:P,24:bt,25:yt})=>{if(L!==null){_t(t,!yt);const v=et();let d=L;if(d&&v-d>x*30)d=v;else if(d&&v-d>x){d+=x;let r=[e+c*.05,u+P];switch(o[Math.floor(r[1]+1)]?.[Math.floor(r[0]+.5)]===a.Ground?(m(t,mt?S*-16:0),r[1]=Math.floor(r[1])):m(t,P+S),(r[1]>o.length+10||o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+1)]===a.Ground||o[Math.floor(r[1]+.8)]?.[Math.floor(r[0]+.8)]===a.Ground||o[Math.floor(r[1]+.5)]?.[Math.floor(r[0])]===a.Ground||o[Math.floor(r[1]+.2)]?.[Math.floor(r[0]+.8)]===a.Ground||o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+.5)]===a.Fire)&&(r=[...f],d=null,g(t,h),m(t,0),w(t[0],Mt+1),B(t,{})),o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+.5)]){case a.Goal:d=null,w(t[1],!0),l();break;case a.DirectLeft:g(t,-Math.abs(c));break;case a.DirectRight:g(t,Math.abs(c));break;case a.Spring:m(t,S*-26);break;case a.SpeedLeft:(Math.floor(e+.5)!==Math.floor(r[0]+.5)||Math.floor(u+.5)!==Math.floor(r[1]+.5))&&c!==h&&g(t,c-h/2);break;case a.SpeedRight:(Math.floor(e+.5)!==Math.floor(r[0]+.5)||Math.floor(u+.5)!==Math.floor(r[1]+.5))&&c!==-h&&g(t,c+h/2);break;case a.Collectible:(Math.floor(e+.5)!==Math.floor(r[0]+.5)||Math.floor(u+.5)!==Math.floor(r[1]+.5))&&B(t,{...bt,[`${Math.floor(r[0]+.5)},${Math.floor(r[1]+.5)}`]:!0});break}k(t,r)}E(t,d)}}),s=b(12,t=>{Ct(t)}),C=b(3,t=>{Z(t,ht(t)())},()=>Z),ct=b(2,t=>{const{16:o,17:l}=t;lt(t[3],{"--x":o,"--y":l})}),Et=xt(5,Rt),_t=_(25,0,()=>s),B=_(24,0,()=>i([s,St(24)])),m=_(23,0,()=>s),g=_(22,0,()=>s),Lt=ot("f3",n(21,0,()=>s)),Pt=G("f9",(t,{20:o})=>{document.addEventListener("keydown",l=>{l.target instanceof Element&&l.target.matches("button, [role='button'], input, select, textarea")||l.key===" "&&o()},{signal:A(t,0)}),document.addEventListener("keyup",l=>{l.key===" "&&$(t,!1)},{signal:A(t,1)}),at(t[2],"pointerdown",o)}),wt=n(20,(t,o)=>{j(t,0),j(t,1),Pt(t)}),$=_(19,0,()=>s),E=_(18,(t,o)=>{nt(t[4],{ball:!0,moving:o!==null}),wt(t,gt(t))},()=>s),U=n(17,0,()=>i([s,ct])),At=ot("f4",(t,o)=>{}),W=n(16,0,()=>i([s,ct])),k=_(15,(t,o)=>{W(t,o?.[0]),U(t,o?.[1])},()=>i([W,U])),Z=n(14,(t,o)=>k(t,[...o]),()=>i([s,k])),Yt=n(13,0,()=>s),X=n(12,0,()=>C),p=n(11,0,()=>C),T=n(10,(t,o)=>{p(t,o?.length),X(t,o?.j)},()=>i([p,X])),tt=n(9,0,()=>C),qt=n(8,(t,o)=>{tt(t,o?.length),T(t,o?.i),Et(t,[o.flatMap((l,f)=>l.flatMap((e,u)=>e===a.Empty||e===a.Start?[]:[{x:u,y:f,type:e}]))])},()=>i([s,tt,T])),jt=G("f7",t=>at(t[2],"pointerup",function(){$(t,!1)}));function zt(t){F(t,0,Lt),J(t[0]),F(t,1,At),J(t[1]),jt(t),E(t,null),$(t,!1),Y(t[0],{value:0,key:`level-${t.$global.params.id}-deaths`}),Y(t[1],{value:!1,key:`level-${t.$global.params.id}-victory`}),g(t,h),m(t,0),B(t,{}),_t(t,!0)}function ut(){return+document.timeline.currentTime}function ht({9:t,11:o,12:l}){return()=>{for(let f=0;f<t;f++)for(let e=0;e<o;e++)if(l===a.Start)return[e,f];return[0,0]}}function gt(t,{18:o}=t){return function(){o===null?E(t,et()):$(t,!0)}}M("f1",ut);M("f0",ht);M("f2",gt);export{Ot as _,Jt as a,zt as b,qt as c,Yt as d};
//# sourceMappingURL=_JdkB4ErA.js.map
