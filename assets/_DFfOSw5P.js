import{p as $t,r as M,n as B,a as tt,q as vt,b as ot,t as L,u as c,v as n,w as P,o as rt,e as k,i,x as b,y as St,d as at,h as G,z as w,s as A,A as nt,B as xt,f as Bt}from"./_DOQ6O42y.js";import{a as j,_ as F,b as V,c as O}from"./_D4CP2RXY.js";const Ot=`${j}${j}<div class=game><div class=view><div></div><!></div></div>`,Jt=`/${F}&/${F}& D D b%m`;let a=function(t){return t[t.Empty=0]="Empty",t[t.Ground=1]="Ground",t[t.Fire=2]="Fire",t[t.Start=3]="Start",t[t.Goal=4]="Goal",t[t.DirectLeft=5]="DirectLeft",t[t.DirectRight=6]="DirectRight",t[t.Spring=7]="Spring",t[t.SpeedRight=8]="SpeedRight",t[t.SpeedLeft=9]="SpeedLeft",t[t.Collectible=10]="Collectible",t}({});a.Ground+"",a.Fire+"",a.Goal+"",a.DirectLeft+"",a.DirectRight+"",a.Spring+"",a.SpeedLeft+"",a.SpeedRight+"",a.Collectible+"";const lt=_t,v=.015,h=.1,J=1e3/60,y=b(4,t=>{const{_:{_:{24:o},3:l,4:f,7:e}}=t;at(t[0],[e,o[`${l},${f}`]&&" collected"])}),et=b(2,t=>{const{_:{3:o,4:l}}=t;nt(t[0],{"--x":o,"--y":l})}),kt=$t("f5",vt(24,0,t=>t._._,()=>y)),st=k(7,0,void 0,()=>y),it=k(4,0,void 0,()=>i([y,et])),ft=k(3,0,void 0,()=>i([y,et])),Gt=M("f6",ot("<div></div>"," ",void 0,()=>[st,it,ft,kt])),Y=Bt(0,0),q=n(7,(t,o)=>Y(t,o?Gt:null),()=>i([Y,G(st,0)])),z=n(6,(t,o)=>q(t,o),()=>q),I=n(5,(t,o)=>z(t,o?.type),()=>z),H=n(4,0,()=>G(it,0)),K=n(3,0,()=>G(ft,0)),N=n(2,(t,o)=>{K(t,o.x),H(t,o.y),I(t,o.type)},()=>i([K,H,I])),Dt=n(1,(t,o)=>N(t,o?.[0]),()=>N),Rt=M("f10",ot("<!><!><!---->","D%",void 0,void 0,()=>Dt)),Ct=B("f8",(t,{8:o,13:l,14:f,16:e,17:_,18:C,19:gt,21:mt,22:d,23:E,24:Mt,25:bt})=>{if(C!==null){ct(t,!bt);const yt=lt();let u=C;if(u&&yt-u>J){u+=J;let r=[e+d,_+E];switch(o[Math.floor(r[1]+1)]?.[Math.floor(r[0]+.5)]===a.Ground?(m(t,gt?v*-16:0),r[1]=Math.floor(r[1])):m(t,E+v),(r[1]>o.length+10||o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+1)]===a.Ground||o[Math.floor(r[1]+.8)]?.[Math.floor(r[0]+.8)]===a.Ground||o[Math.floor(r[1])]?.[Math.floor(r[0]+.5)]===a.Ground||o[Math.floor(r[1]+.2)]?.[Math.floor(r[0]+.8)]===a.Ground||o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+.5)]===a.Fire)&&(r=[...f],u=null,g(t,h),m(t,0),L(t[0],mt+1),S(t,{})),o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+.5)]){case a.Goal:u=null,L(t[1],!0),l();break;case a.DirectLeft:g(t,-Math.abs(d));break;case a.DirectRight:g(t,Math.abs(d));break;case a.Spring:m(t,v*-26);break;case a.SpeedLeft:(Math.floor(e+.5)!==Math.floor(r[0]+.5)||Math.floor(_+.5)!==Math.floor(r[1]+.5))&&d!==h&&g(t,d-h/2);break;case a.SpeedRight:(Math.floor(e+.5)!==Math.floor(r[0]+.5)||Math.floor(_+.5)!==Math.floor(r[1]+.5))&&d!==-h&&g(t,d+h/2);break;case a.Collectible:(Math.floor(e+.5)!==Math.floor(r[0]+.5)||Math.floor(_+.5)!==Math.floor(r[1]+.5))&&S(t,{...Mt,[`${Math.floor(r[0]+.5)},${Math.floor(r[1]+.5)}`]:!0});break}x(t,r)}R(t,u)}}),s=b(12,t=>{Ct(t)}),D=b(3,t=>{W(t,ut(t)())},()=>W),dt=b(2,t=>{const{16:o,17:l}=t;nt(t[3],{"--x":o,"--y":l})}),Et=xt(5,Rt),ct=c(25,0,()=>s),S=c(24,0,()=>i([s,St(24)])),m=c(23,0,()=>s),g=c(22,0,()=>s),Lt=tt("f3",n(21,0,()=>s)),Pt=B("f9",(t,{20:o})=>{document.addEventListener("keydown",l=>{l.target instanceof Element&&l.target.matches("button, [role='button'], input, select, textarea")||l.key===" "&&o()},{signal:P(t,0)}),document.addEventListener("keyup",l=>{l.key===" "&&$(t,!1)},{signal:P(t,1)}),rt(t[2],"pointerdown",o)}),wt=n(20,(t,o)=>{w(t,0),w(t,1),Pt(t)}),$=c(19,0,()=>s),R=c(18,(t,o)=>{at(t[4],{ball:!0,moving:o!==null}),wt(t,ht(t))},()=>s),Q=n(17,0,()=>i([s,dt])),At=tt("f4",(t,o)=>{}),U=n(16,0,()=>i([s,dt])),x=c(15,(t,o)=>{U(t,o?.[0]),Q(t,o?.[1])},()=>i([U,Q])),W=n(14,(t,o)=>x(t,[...o]),()=>i([s,x])),Yt=n(13,0,()=>s),Z=n(12,0,()=>D),X=n(11,0,()=>D),p=n(10,(t,o)=>{X(t,o?.length),Z(t,o?.j)},()=>i([X,Z])),T=n(9,0,()=>D),qt=n(8,(t,o)=>{T(t,o?.length),p(t,o?.i),Et(t,[o.flatMap((l,f)=>l.flatMap((e,_)=>e===a.Empty||e===a.Start?[]:[{x:_,y:f,type:e}]))])},()=>i([s,T,p])),jt=B("f7",t=>rt(t[2],"pointerup",function(){$(t,!1)}));function zt(t){A(t,0,Lt),V(t[0]),A(t,1,At),V(t[1]),jt(t),R(t,null),$(t,!1),O(t[0],{value:0,key:`level-${t.$global.params.id}-deaths`}),O(t[1],{value:!1,key:`level-${t.$global.params.id}-victory`}),g(t,h),m(t,0),S(t,{}),ct(t,!0)}function _t(){return+document.timeline.currentTime}function ut({9:t,11:o,12:l}){return()=>{for(let f=0;f<t;f++)for(let e=0;e<o;e++)if(l===a.Start)return[e,f];return[0,0]}}function ht(t,{18:o}=t){return function(){o===null?R(t,lt()):$(t,!0)}}M("f1",_t);M("f0",ut);M("f2",ht);export{Ot as _,Jt as a,zt as b,qt as c,Yt as d};
//# sourceMappingURL=_DFfOSw5P.js.map
