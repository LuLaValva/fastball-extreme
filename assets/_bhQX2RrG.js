import{a as _,e as k,r as Z,g as v,t as j,p as m,v as i,q as A,o as p,j as r,l as f,u as c,w as u,h as Et,m as l,x as R,s as L,k as wt,y as jt}from"./_Bj9MHulz.js";import{_ as V,a as G,b as O,c as F}from"./_DAPjSMIw.js";const Qt=`${V}${V}<div class=game><div class=view><div></div><!></div></div>`,Ut=`/${G}&/${G}& D D b%m`;let a=function(t){return t[t.Empty=0]="Empty",t[t.Tile=1]="Tile",t[t.Spikes=2]="Spikes",t[t.Start=3]="Start",t[t.Goal=4]="Goal",t[t.DirectLeft=5]="DirectLeft",t[t.DirectRight=6]="DirectRight",t[t.Spring=7]="Spring",t}({});const T=$t,M=.015,h=.1,J=1e3/60,tt=c(2,t=>{const{_:{3:o,4:n}}=t;u(t[0],{"--x":o,"--y":n})}),ot=r(4,0,void 0,()=>tt),nt=r(3,0,void 0,()=>tt),At=_("f5",v("<div class=spring></div>"," ",void 0,()=>[ot,nt])),st=c(2,t=>{const{_:{3:o,4:n}}=t;u(t[0],{"--x":o,"--y":n})}),at=r(4,0,void 0,()=>st),it=r(3,0,void 0,()=>st),Rt=_("f6",v("<div class=right-sign></div>"," ",void 0,()=>[at,it])),lt=c(2,t=>{const{_:{3:o,4:n}}=t;u(t[0],{"--x":o,"--y":n})}),rt=r(4,0,void 0,()=>lt),et=r(3,0,void 0,()=>lt),Lt=_("f7",v("<div class=left-sign></div>"," ",void 0,()=>[rt,et])),_t=c(2,t=>{const{_:{3:o,4:n}}=t;u(t[0],{"--x":o,"--y":n})}),dt=r(4,0,void 0,()=>_t),ft=r(3,0,void 0,()=>_t),Vt=_("f8",v("<div class=goal></div>"," ",void 0,()=>[dt,ft])),ct=c(2,t=>{const{_:{3:o,4:n}}=t;u(t[0],{"--x":o,"--y":n})}),ut=r(4,0,void 0,()=>ct),yt=r(3,0,void 0,()=>ct),Gt=_("f9",v("<div class=spikes></div>"," ",void 0,()=>[ut,yt])),vt=c(2,t=>{const{_:{3:o,4:n}}=t;u(t[0],{"--x":o,"--y":n})}),gt=r(4,0,void 0,()=>vt),mt=r(3,0,void 0,()=>vt),Ot=_("f10",v("<div class=tile></div>"," ",void 0,()=>[gt,mt])),Y=wt(0,0),C=i(5,(t,o)=>Y(t,o===a.Tile?Ot:o===a.Spikes?Gt:o===a.Goal?Vt:o===a.DirectLeft?Lt:o===a.DirectRight?Rt:o===a.Spring?At:null),()=>Y),X=i(4,0,()=>f([l(gt,0),l(ut,0),l(dt,0),l(rt,0),l(at,0),l(ot,0)])),q=i(3,0,()=>f([l(mt,0),l(yt,0),l(ft,0),l(et,0),l(it,0),l(nt,0)])),I=i(2,(t,o)=>{q(t,o.x),X(t,o.y),C(t,o.type)},()=>f([q,X,C])),Ft=i(1,(t,o)=>I(t,o?.[0]),()=>I),Jt=_("f14",v("<!><!><!---->","D%",void 0,void 0,()=>Ft)),Yt=k("f12",(t,{8:o,13:n,14:y,16:d,17:b,18:E,19:Mt,21:St,22:kt,23:w,24:Pt})=>{if(E!==null){ht(t,!Pt);const Dt=T();let g=E;if(g&&Dt-g>J){g+=J;let s=[d+kt,b+w];switch(o[Math.floor(s[1]+1)]?.[Math.floor(s[0]+.5)]===a.Tile?(x(t,Mt?M*-16:0),s[1]=Math.floor(s[1])):x(t,w+M),(s[1]>o.length+10||o[Math.floor(s[1]+.5)]?.[Math.floor(s[0]+1)]===a.Tile||o[Math.floor(s[1]+.8)]?.[Math.floor(s[0]+.8)]===a.Tile||o[Math.floor(s[1])]?.[Math.floor(s[0]+.5)]===a.Tile||o[Math.floor(s[1]+.2)]?.[Math.floor(s[0]+.8)]===a.Tile||o[Math.floor(s[1]+.5)]?.[Math.floor(s[0]+.5)]===a.Spikes)&&(s=[...y],g=null,$(t,h),x(t,0),j(t[0],St+1)),o[Math.floor(s[1]+.5)]?.[Math.floor(s[0]+.5)]){case a.Goal:g=null,j(t[1],!0),n();break;case a.DirectLeft:$(t,-h);break;case a.DirectRight:$(t,h);break;case a.Spring:x(t,M*-26);break}S(t,s)}D(t,g)}}),e=c(11,t=>{Yt(t)}),P=c(3,t=>{K(t,Bt(t)())},()=>K),xt=c(2,t=>{const{16:o,17:n}=t;u(t[3],{"--x":o,"--y":n})}),Ct=jt(5,Jt),ht=m(24,0,()=>e),x=m(23,0,()=>e),$=m(22,(t,o)=>u(t[4],{"animation-duration":.15/Math.abs(o)+"s","animation-direction":o<0?"reverse":void 0}),()=>e),Xt=Z("f3",i(21,0,()=>e)),qt=k("f13",(t,{20:o})=>{document.addEventListener("keydown",n=>{n.target instanceof Element&&n.target.matches("button, [role='button'], input, select, textarea")||n.key===" "&&o()},{signal:A(t,0)}),document.addEventListener("keyup",n=>{n.key===" "&&B(t,!1)},{signal:A(t,1)}),p(t[2],"pointerdown",o)}),It=i(20,(t,o)=>{R(t,0),R(t,1),qt(t)}),B=m(19,0,()=>e),D=m(18,(t,o)=>{Et(t[4],{ball:!0,moving:o!==null}),It(t,bt(t))},()=>e),z=i(17,0,()=>f([e,xt])),zt=Z("f4",(t,o)=>{}),H=i(16,0,()=>f([e,xt])),S=m(15,(t,o)=>{H(t,o?.[0]),z(t,o?.[1])},()=>f([H,z])),K=i(14,(t,o)=>S(t,[...o]),()=>f([e,S])),Wt=i(13,0,()=>e),N=i(12,0,()=>P),Q=i(11,0,()=>P),U=i(10,(t,o)=>{Q(t,o?.length),N(t,o?.j)},()=>f([Q,N])),W=i(9,0,()=>P),Zt=i(8,(t,o)=>{W(t,o?.length),U(t,o?.i),Ct(t,[o.flatMap((n,y)=>n.flatMap((d,b)=>d===a.Empty||d===a.Start?[]:[{x:b,y,type:d}]))])},()=>f([e,W,U])),Ht=k("f11",t=>p(t[2],"pointerup",function(){B(t,!1)}));function pt(t){L(t,0,Xt),O(t[0]),L(t,1,zt),O(t[1]),Ht(t),D(t,null),B(t,!1),F(t[0],{value:0,key:`level-${t.$global.params.id}-deaths`}),F(t[1],{value:!1,key:`level-${t.$global.params.id}-victory`}),$(t,h),x(t,0),ht(t,!0)}function $t(){return+document.timeline.currentTime}function Bt({9:t,11:o,12:n}){return()=>{for(let y=0;y<t;y++)for(let d=0;d<o;d++)if(n===a.Start)return[d,y];return[0,0]}}function bt(t,{18:o}=t){return function(){o===null?D(t,T()):B(t,!0)}}_("f1",$t);_("f0",Bt);_("f2",bt);export{Qt as _,Ut as a,pt as b,Zt as c,Wt as d};
//# sourceMappingURL=_bhQX2RrG.js.map
