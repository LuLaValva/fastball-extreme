import{r as M,e as $,b as X,g as p,t as R,p as h,v as n,q as E,o as T,j as x,h as tt,l as f,u as y,m as k,w as L,s as w,x as ot,y as mt,k as Mt}from"./_C-dC1DqD.js";import{_ as j,a as A,b as F,c as V}from"./_CP7Y-eaL.js";const Et=`${j}${j}<div class=game><div class=view><div></div><!></div></div>`,Lt=`/${A}&/${A}& D D b%m`;let a=function(t){return t[t.Empty=0]="Empty",t[t.Ground=1]="Ground",t[t.Fire=2]="Fire",t[t.Start=3]="Start",t[t.Goal=4]="Goal",t[t.DirectLeft=5]="DirectLeft",t[t.DirectRight=6]="DirectRight",t[t.Spring=7]="Spring",t[t.SpeedRight=8]="SpeedRight",t[t.SpeedLeft=9]="SpeedLeft",t}({});a.Ground+"",a.Fire+"",a.Goal+"",a.DirectLeft+"",a.DirectRight+"",a.Spring+"",a.SpeedLeft+"",a.SpeedRight+"";const rt=lt,v=.015,u=.1,O=1e3/60,at=y(2,t=>{const{_:{3:o,4:s}}=t;ot(t[0],{"--x":o,"--y":s})}),nt=x(6,(t,o)=>tt(t[0],o)),st=x(4,0,void 0,()=>at),it=x(3,0,void 0,()=>at),yt=M("f5",p("<div></div>"," ",void 0,()=>[nt,st,it])),J=Mt(0,0),Y=n(6,(t,o)=>J(t,o?yt:null),()=>f([J,k(nt,0)])),C=n(5,(t,o)=>Y(t,o?.type),()=>Y),q=n(4,0,()=>k(st,0)),I=n(3,0,()=>k(it,0)),z=n(2,(t,o)=>{I(t,o.x),q(t,o.y),C(t,o.type)},()=>f([I,q,C])),bt=n(1,(t,o)=>z(t,o?.[0]),()=>z),vt=M("f9",p("<!><!><!---->","D%",void 0,void 0,()=>bt)),St=$("f7",(t,{8:o,13:s,14:l,16:i,17:g,18:D,19:ut,21:ct,22:_,23:P,24:ht})=>{if(D!==null){ft(t,!ht);const gt=rt();let d=D;if(d&&gt-d>O){d+=O;let r=[i+_,g+P];switch(o[Math.floor(r[1]+1)]?.[Math.floor(r[0]+.5)]===a.Ground?(m(t,ut?v*-16:0),r[1]=Math.floor(r[1])):m(t,P+v),(r[1]>o.length+10||o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+1)]===a.Ground||o[Math.floor(r[1]+.8)]?.[Math.floor(r[0]+.8)]===a.Ground||o[Math.floor(r[1])]?.[Math.floor(r[0]+.5)]===a.Ground||o[Math.floor(r[1]+.2)]?.[Math.floor(r[0]+.8)]===a.Ground||o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+.5)]===a.Fire)&&(r=[...l],d=null,c(t,u),m(t,0),R(t[0],ct+1)),o[Math.floor(r[1]+.5)]?.[Math.floor(r[0]+.5)]){case a.Goal:d=null,R(t[1],!0),s();break;case a.DirectLeft:c(t,-Math.abs(_));break;case a.DirectRight:c(t,Math.abs(_));break;case a.Spring:m(t,v*-26);break;case a.SpeedLeft:(Math.floor(g+.5)!==Math.floor(r[1]+.5)||Math.floor(i+.5)!==Math.floor(r[0]+.5))&&_!==u&&c(t,_-u/2);break;case a.SpeedRight:(Math.floor(g+.5)!==Math.floor(r[1]+.5)||Math.floor(i+.5)!==Math.floor(r[0]+.5))&&_!==-u&&c(t,_+u/2);break}S(t,r)}G(t,d)}}),e=y(11,t=>{St(t)}),B=y(3,t=>{N(t,_t(t)())},()=>N),et=y(2,t=>{const{16:o,17:s}=t;ot(t[3],{"--x":o,"--y":s})}),$t=mt(5,vt),ft=h(24,0,()=>e),m=h(23,0,()=>e),c=h(22,0,()=>e),xt=X("f3",n(21,0,()=>e)),kt=$("f8",(t,{20:o})=>{document.addEventListener("keydown",s=>{s.target instanceof Element&&s.target.matches("button, [role='button'], input, select, textarea")||s.key===" "&&o()},{signal:E(t,0)}),document.addEventListener("keyup",s=>{s.key===" "&&b(t,!1)},{signal:E(t,1)}),T(t[2],"pointerdown",o)}),Bt=n(20,(t,o)=>{L(t,0),L(t,1),kt(t)}),b=h(19,0,()=>e),G=h(18,(t,o)=>{tt(t[4],{ball:!0,moving:o!==null}),Bt(t,dt(t))},()=>e),H=n(17,0,()=>f([e,et])),Gt=X("f4",(t,o)=>{}),K=n(16,0,()=>f([e,et])),S=h(15,(t,o)=>{K(t,o?.[0]),H(t,o?.[1])},()=>f([K,H])),N=n(14,(t,o)=>S(t,[...o]),()=>f([e,S])),wt=n(13,0,()=>e),Q=n(12,0,()=>B),U=n(11,0,()=>B),W=n(10,(t,o)=>{U(t,o?.length),Q(t,o?.j)},()=>f([U,Q])),Z=n(9,0,()=>B),jt=n(8,(t,o)=>{Z(t,o?.length),W(t,o?.i),$t(t,[o.flatMap((s,l)=>s.flatMap((i,g)=>i===a.Empty||i===a.Start?[]:[{x:g,y:l,type:i}]))])},()=>f([e,Z,W])),Dt=$("f6",t=>T(t[2],"pointerup",function(){b(t,!1)}));function At(t){w(t,0,xt),F(t[0]),w(t,1,Gt),F(t[1]),Dt(t),G(t,null),b(t,!1),V(t[0],{value:0,key:`level-${t.$global.params.id}-deaths`}),V(t[1],{value:!1,key:`level-${t.$global.params.id}-victory`}),c(t,u),m(t,0),ft(t,!0)}function lt(){return+document.timeline.currentTime}function _t({9:t,11:o,12:s}){return()=>{for(let l=0;l<t;l++)for(let i=0;i<o;i++)if(s===a.Start)return[i,l];return[0,0]}}function dt(t,{18:o}=t){return function(){o===null?G(t,rt()):b(t,!0)}}M("f1",lt);M("f0",_t);M("f2",dt);export{Et as _,Lt as a,At as b,jt as c,wt as d};
//# sourceMappingURL=_DA0gNBYG.js.map
